{% extends 'budget/base.html' %}

{% block body %}
{{ category_names|json_script:"category_names" }}
{{ category_types|json_script:"category_types" }}
{{ label_names|json_script:"label_names" }}
{{ label_category|json_script:"label_category" }}
{{ label_amountRec|json_script:"label_amountRec" }}
{{ label_amountPlanned|json_script:"label_amountPlanned" }}
{{ transaction_description|json_script:"transaction_description" }}
{{ transaction_type|json_script:"transaction_type" }}
{{ transaction_label|json_script:"transaction_label" }}
{{ transaction_amount|json_script:"transaction_amount" }}
{{ transaction_date|json_script:"transaction_date" }}
{{ cat_sum|json_script:"cat_sum"}}
{{ sums|json_script:"sums"}}
{{ sumLabels|json_script:"sumLabels"}}
{{ numIncome|json_script:"numIncome"}}

    <div class="col py-3">
        <div class="container-fluid">
            <div class="row">
                <div class="text-light">
                    <h1>Reports</h1>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-12">
                    <div class="card text-white bg-dark h-100 bg-opacity-25">
                        <div class="card-body">
                            <ul class="nav nav-tabs nav-fill bg-light bg-opacity-25 rounded" id="reportsTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link text-white active" id="home-tab" data-bs-toggle="tab"
                                            data-bs-target="#overview-tab-pane" type="button" role="tab"
                                            aria-controls="overview-tab-pane" aria-selected="true">Budget Overview
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link text-white" id="monthly-tab" data-bs-toggle="tab"
                                            data-bs-target="#monthly-tab-pane" type="button" role="tab"
                                            aria-controls="monthly-tab-pane" aria-selected="false">Monthly Spending
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link text-white" id="categories-tab" data-bs-toggle="tab"
                                            data-bs-target="#categories-tab-pane" type="button" role="tab"
                                            aria-controls="categories-tab-pane" aria-selected="false">Spending Categories
                                    </button>
                                </li>
                            </ul>
                            <div class="tab-content" id="reportsTabContent">
                                <div class="tab-pane fade show active" id="overview-tab-pane" role="tabpanel"
                                     aria-labelledby="overview-tab" tabindex="0">Budget Overview charts here - under construction!!
                                     <div class="row mt-2">
                                        <div class="col-md-6">
                                            <div class="card text-white bg-dark h-100 bg-opacity-25">
                                                <div class="card-body">
                                                    <h2 class="fs-5 text-center">Categories</h2>
                                                    <canvas id="myChart1"></canvas>
                                                    <script type="text/javascript">
                                                        var categoryNames = JSON.parse(document.getElementById('category_names').textContent)
                                                        $(document).ready(function () {
                                                            var ctx = document.getElementById('myChart1').getContext('2d');
                                                            var myCategory = new Chart(ctx, {
                                                                type: 'doughnut',
                                                                data: {
                                                                    labels: categoryNames,
                                                                    datasets: [{
                                                                        label: 'category names',
                                                                        data: categoryNames.map(category => 1),
                                                                        backgroundColor: [
                                                                            '#1abc9c',
                                                                            '#16a085',
                                                                            '#2ecc71',
                                                                            '#27ae60',
                                                                            '#3498db',
                                                                            '#2980b9',
                                                                            '#9b59b6',
                                                                            '#8e44ad',
                                                                            '#f1c40f',
                                                                            '#f39c12',
                                                                            '#e67e22',
                                                                            '#d35400',
                                                                            '#e74c3c',
                                                                            '#c0392b',
                                                                            '#ecf0f1',
                                                                            '#bdc3c7',
                                                                            '#95a5a6',
                                                                            '#7f8c8d',
                                                                        ],
                                                                        borderColor: [
                                                                            '#fff',
                                                                        ],
                                                                        borderWidth: 1
                                                                    }]
                                                                },
                                                                options: {
                                                                    legend: {
                                                                        display: false,
                                                                    },
                                                                    scales: {
                                                                        y: {
                                                                            beginAtZero: true
                                                                        }
                                                                    },
                                                                }
                                                            });
                                                        });
                                                    </script>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card text-white bg-dark h-100 bg-opacity-25">
                                                <div class="card-body">
                                                    <h2 class="fs-5 text-center">Category Types</h2>
                                                    <canvas id="myChart2"></canvas>
                                                    <script type="text/javascript">
                                                        var categoryTypes = JSON.parse(document.getElementById('category_types').textContent)
                                                        $(document).ready(function () {
                                                            var ctx = document.getElementById('myChart2').getContext('2d');
                                                            var myCategory = new Chart(ctx, {
                                                                type: 'doughnut',
                                                                data: {
                                                                    labels: categoryTypes,
                                                                    datasets: [{
                                                                        label: 'Category Types',
                                                                        data: categoryTypes.map(category => 1),
                                                                        backgroundColor: [
                                                                            '#1abc9c',
                                                                            '#16a085',
                                                                            '#2ecc71',
                                                                            '#27ae60',
                                                                            '#3498db',
                                                                            '#2980b9',
                                                                            '#9b59b6',
                                                                            '#8e44ad',
                                                                            '#f1c40f',
                                                                            '#f39c12',
                                                                            '#e67e22',
                                                                            '#d35400',
                                                                            '#e74c3c',
                                                                            '#c0392b',
                                                                            '#ecf0f1',
                                                                            '#bdc3c7',
                                                                            '#95a5a6',
                                                                            '#7f8c8d',
                                                                        ],
                                                                        borderColor: [
                                                                            '#fff',
                                                                        ],
                                                                        borderWidth: 1
                                                                    }]
                                                                },
                                                                options: {
                                                                    legend: {
                                                                        display: false,
                                                                    },
                                                                    scales: {
                                                                        y: {
                                                                            beginAtZero: true
                                                                        }
                                                                    },
                                                                }
                                                            });
                                                        });
                                                    </script>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                     
                                        
                                </div>
                                <div class="tab-pane fade" id="monthly-tab-pane" role="tabpanel"
                                     aria-labelledby="monthly-tab" tabindex="0">Monthly Spending charts here
                                </div>
                                <div class="tab-pane fade" id="categories-tab-pane" role="tabpanel"
                                     aria-labelledby="categories-tab" tabindex="0">Spending Categories charts here
                                     <div class="row mt-2">
                                        <div class="col-md-6">
                                            <div class="card text-white bg-dark h-100 bg-opacity-25">
                                                <div class="card-body">
                                                    <h2 class="fs-5 text-center">Categories</h2>
                                                    <canvas id="myChartCategories1"></canvas>
                                                    <script type="text/javascript">
                                                        var categoryNames = JSON.parse(document.getElementById('category_names').textContent)
                                                        $(document).ready(function () {
                                                            var ctx = document.getElementById('myChartCategories1').getContext('2d');
                                                            var myCategory = new Chart(ctx, {
                                                                type: 'doughnut',
                                                                data: {
                                                                    labels: categoryNames,
                                                                    datasets: [{
                                                                        label: 'category names',
                                                                        data: categoryNames.map(category => 1),
                                                                        backgroundColor: [
                                                                            '#1abc9c',
                                                                            '#16a085',
                                                                            '#2ecc71',
                                                                            '#27ae60',
                                                                            '#3498db',
                                                                            '#2980b9',
                                                                            '#9b59b6',
                                                                            '#8e44ad',
                                                                            '#f1c40f',
                                                                            '#f39c12',
                                                                            '#e67e22',
                                                                            '#d35400',
                                                                            '#e74c3c',
                                                                            '#c0392b',
                                                                            '#ecf0f1',
                                                                            '#bdc3c7',
                                                                            '#95a5a6',
                                                                            '#7f8c8d',
                                                                        ],
                                                                        borderColor: [
                                                                            '#fff',
                                                                        ],
                                                                        borderWidth: 1
                                                                    }]
                                                                },
                                                                options: {
                                                                    legend: {
                                                                        display: false,
                                                                    },
                                                                    scales: {
                                                                        y: {
                                                                            beginAtZero: true
                                                                        }
                                                                    },
                                                                }
                                                            });
                                                        });
                                                    </script>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card text-white bg-dark h-100 bg-opacity-25">
                                                <div class="card-body">
                                                    <h2 class="fs-5 text-center">Category Types</h2>
                                                    <canvas id="myChartCategories2"></canvas>
                                                    <script type="text/javascript">
                                                        var categoryTypes = JSON.parse(document.getElementById('category_types').textContent)
                                                        var numIncome = JSON.parse(document.getElementById('numIncome').textContent)
                                                        console.log('categoryTypes', categoryTypes)
                                                        console.log('numIncome', numIncome)
                                                        $(document).ready(function () {
                                                            var ctx = document.getElementById('myChartCategories2').getContext('2d');
                                                            var myCategory = new Chart(ctx, {
                                                                type: 'doughnut',
                                                                data: {
                                                                    labels: categoryTypes,
                                                                    datasets: [{
                                                                        label: 'Category Types',
                                                                        data: numIncome,
                                                                        backgroundColor: [
                                                                            '#1abc9c',
                                                                            '#f39c12',
                                                                        ],
                                                                        borderColor: [
                                                                            '#fff',
                                                                        ],
                                                                        borderWidth: 1
                                                                    }]
                                                                },
                                                                options: {
                                                                    legend: {
                                                                        //display: false,
                                                                    },
                                                                    scales: {
                                                                        y: {
                                                                            beginAtZero: true
                                                                        }
                                                                    },
                                                                }
                                                            });
                                                        });
                                                    </script>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}